{"version":3,"file":"ngx-lite-nav-drawer.js","sources":["ng:/@ngx-lite/nav-drawer/ngx-nav-drawer.component.ts","ng:/@ngx-lite/nav-drawer/ngx-nav-drawer.module.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Input,\n  OnInit,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  ViewEncapsulation,\n  ChangeDetectorRef,\n  PLATFORM_ID,\n  Inject,\n  HostListener,\n  ViewChild,\n  ElementRef,\n  OnChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { fromEvent, Subscription } from 'rxjs';\n\nimport { trapTabFocus, KeyCodes } from '@ngx-lite/util';\n\n@Component({\n  selector: 'ngx-nav-drawer',\n  templateUrl: './ngx-nav-drawer.component.html',\n  styleUrls: ['./ngx-nav-drawer.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NgxNavDrawerComponent implements OnChanges, OnDestroy, OnInit {\n  @Output() openChange = new EventEmitter<boolean>();\n  @Input()\n  set open(value: boolean) {\n    this.show = value;\n    this.openChange.emit(this.show);\n  }\n\n  @Input() fixed = false;\n  @Input() fixedAtWidth = '1024px';\n  @ViewChild('nav', { static: false }) nav: ElementRef;\n\n  show = false;\n  fixedMode = false;\n  private subscription: Subscription;\n  private lastFocusedElement: HTMLElement;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: any,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    if (isPlatformBrowser(this.platformId)) {\n      this.setFixedPosition();\n      this.subscription = fromEvent(window, 'resize').subscribe(event =>\n        this.setFixedPosition()\n      );\n    }\n  }\n\n  @HostListener('document:click', ['$event'])\n  rootClick(event) {\n    this.lastFocusedElement = event.target;\n  }\n\n  ngOnChanges() {\n    this.focus();\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  outerClick(event) {\n    if (event.keyCode === KeyCodes.Escape && this.show === true) {\n      this.toggle();\n    }\n  }\n\n  setFixedPosition() {\n    if (isPlatformBrowser(this.platformId)) {\n      if (\n        window.matchMedia(`(min-width: ${this.fixedAtWidth})`).matches &&\n        this.fixed\n      ) {\n        this.fixedMode = true;\n      } else {\n        this.fixedMode = false;\n      }\n\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  toggle() {\n    if (!this.fixedMode) {\n      this.show = !this.show;\n      this.openChange.emit(this.show);\n    }\n\n    this.focus();\n  }\n\n  focus() {\n    if (this.show) {\n      trapTabFocus(this.nav.nativeElement);\n    } else if (this.lastFocusedElement) {\n      this.lastFocusedElement.focus();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxNavDrawerComponent } from './ngx-nav-drawer.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxNavDrawerComponent],\n  exports: [NgxNavDrawerComponent]\n})\nexport class NgxNavDrawerModule {}\n"]}