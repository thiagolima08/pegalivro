{"version":3,"file":"ngx-lite-nav-drawer.umd.js","sources":["ng://@ngx-lite/nav-drawer/ngx-nav-drawer.component.ts","ng://@ngx-lite/nav-drawer/ngx-nav-drawer.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  OnInit,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  ViewEncapsulation,\n  ChangeDetectorRef,\n  PLATFORM_ID,\n  Inject,\n  HostListener,\n  ViewChild,\n  ElementRef,\n  OnChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { fromEvent, Subscription } from 'rxjs';\n\nimport { trapTabFocus, KeyCodes } from '@ngx-lite/util';\n\n@Component({\n  selector: 'ngx-nav-drawer',\n  templateUrl: './ngx-nav-drawer.component.html',\n  styleUrls: ['./ngx-nav-drawer.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NgxNavDrawerComponent implements OnChanges, OnDestroy, OnInit {\n  @Output() openChange = new EventEmitter<boolean>();\n  @Input()\n  set open(value: boolean) {\n    this.show = value;\n    this.openChange.emit(this.show);\n  }\n\n  @Input() fixed = false;\n  @Input() fixedAtWidth = '1024px';\n  @ViewChild('nav', { static: false }) nav: ElementRef;\n\n  show = false;\n  fixedMode = false;\n  private subscription: Subscription;\n  private lastFocusedElement: HTMLElement;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: any,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    if (isPlatformBrowser(this.platformId)) {\n      this.setFixedPosition();\n      this.subscription = fromEvent(window, 'resize').subscribe(event =>\n        this.setFixedPosition()\n      );\n    }\n  }\n\n  @HostListener('document:click', ['$event'])\n  rootClick(event) {\n    this.lastFocusedElement = event.target;\n  }\n\n  ngOnChanges() {\n    this.focus();\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  outerClick(event) {\n    if (event.keyCode === KeyCodes.Escape && this.show === true) {\n      this.toggle();\n    }\n  }\n\n  setFixedPosition() {\n    if (isPlatformBrowser(this.platformId)) {\n      if (\n        window.matchMedia(`(min-width: ${this.fixedAtWidth})`).matches &&\n        this.fixed\n      ) {\n        this.fixedMode = true;\n      } else {\n        this.fixedMode = false;\n      }\n\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  toggle() {\n    if (!this.fixedMode) {\n      this.show = !this.show;\n      this.openChange.emit(this.show);\n    }\n\n    this.focus();\n  }\n\n  focus() {\n    if (this.show) {\n      trapTabFocus(this.nav.nativeElement);\n    } else if (this.lastFocusedElement) {\n      this.lastFocusedElement.focus();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxNavDrawerComponent } from './ngx-nav-drawer.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxNavDrawerComponent],\n  exports: [NgxNavDrawerComponent]\n})\nexport class NgxNavDrawerModule {}\n"],"names":["EventEmitter","isPlatformBrowser","fromEvent","KeyCodes","trapTabFocus","Component","ViewEncapsulation","ChangeDetectionStrategy","Inject","PLATFORM_ID","ChangeDetectorRef","Output","Input","ViewChild","HostListener","NgModule","CommonModule"],"mappings":";;;;;;;;;;AAAA;QA8CE,+BAC+B,UAAe,EACpC,iBAAoC;YADf,eAAU,GAAV,UAAU,CAAK;YACpC,sBAAiB,GAAjB,iBAAiB,CAAmB;YAlBpC,eAAU,GAAG,IAAIA,iBAAY,EAAW,CAAC;YAO1C,UAAK,GAAG,KAAK,CAAC;YACd,iBAAY,GAAG,QAAQ,CAAC;YAGjC,SAAI,GAAG,KAAK,CAAC;YACb,cAAS,GAAG,KAAK,CAAC;SAOd;QAlBJ,sBACI,uCAAI;;;;;YADR,UACS,KAAc;gBACrB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;gBAClB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjC;;;WAAA;;;;QAgBD,wCAAQ;;;QAAR;YAAA,iBAOC;YANC,IAAIC,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBACtC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,IAAI,CAAC,YAAY,GAAGC,cAAS,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,SAAS;;;;gBAAC,UAAA,KAAK;oBAC7D,OAAA,KAAI,CAAC,gBAAgB,EAAE;iBAAA,EACxB,CAAC;aACH;SACF;;;;;QAGD,yCAAS;;;;QADT,UACU,KAAK;YACb,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC,MAAM,CAAC;SACxC;;;;QAED,2CAAW;;;QAAX;YACE,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;;;;QAED,2CAAW;;;QAAX;YACE,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;aACjC;SACF;;;;;QAGD,0CAAU;;;;QADV,UACW,KAAK;YACd,IAAI,KAAK,CAAC,OAAO,KAAKC,aAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;gBAC3D,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;SACF;;;;QAED,gDAAgB;;;QAAhB;YACE,IAAIF,wBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBACtC,IACE,MAAM,CAAC,UAAU,CAAC,iBAAe,IAAI,CAAC,YAAY,MAAG,CAAC,CAAC,OAAO;oBAC9D,IAAI,CAAC,KAAK,EACV;oBACA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;iBACvB;qBAAM;oBACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;iBACxB;gBAED,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;aACxC;SACF;;;;QAED,sCAAM;;;QAAN;YACE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;gBACvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjC;YAED,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;;;;QAED,qCAAK;;;QAAL;YACE,IAAI,IAAI,CAAC,IAAI,EAAE;gBACbG,iBAAY,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;aACtC;iBAAM,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBAClC,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;aACjC;SACF;;oBA1FFC,cAAS,SAAC;wBACT,QAAQ,EAAE,gBAAgB;wBAC1B,kTAA8C;wBAE9C,aAAa,EAAEC,sBAAiB,CAAC,IAAI;wBACrC,eAAe,EAAEC,4BAAuB,CAAC,MAAM;;qBAChD;;;;oDAmBIC,WAAM,SAACC,gBAAW;oBAvCrBC,sBAAiB;;;iCAsBhBC,WAAM;2BACNC,UAAK;4BAMLA,UAAK;mCACLA,UAAK;0BACLC,cAAS,SAAC,KAAK,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;gCAqBlCC,iBAAY,SAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC;iCAezCA,iBAAY,SAAC,cAAc,EAAE,CAAC,QAAQ,CAAC;;QAsC1C,4BAAC;KA3FD;;;;;;ACtBA;QAIA;SAKkC;;oBALjCC,aAAQ,SAAC;wBACR,OAAO,EAAE,CAACC,mBAAY,CAAC;wBACvB,YAAY,EAAE,CAAC,qBAAqB,CAAC;wBACrC,OAAO,EAAE,CAAC,qBAAqB,CAAC;qBACjC;;QACgC,yBAAC;KALlC;;;;;;;;;;;;;"}