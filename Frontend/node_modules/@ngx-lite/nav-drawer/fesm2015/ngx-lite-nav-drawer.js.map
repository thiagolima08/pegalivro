{"version":3,"file":"ngx-lite-nav-drawer.js","sources":["ng://@ngx-lite/nav-drawer/ngx-nav-drawer.component.ts","ng://@ngx-lite/nav-drawer/ngx-nav-drawer.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  OnInit,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  ViewEncapsulation,\n  ChangeDetectorRef,\n  PLATFORM_ID,\n  Inject,\n  HostListener,\n  ViewChild,\n  ElementRef,\n  OnChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { fromEvent, Subscription } from 'rxjs';\n\nimport { trapTabFocus, KeyCodes } from '@ngx-lite/util';\n\n@Component({\n  selector: 'ngx-nav-drawer',\n  templateUrl: './ngx-nav-drawer.component.html',\n  styleUrls: ['./ngx-nav-drawer.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NgxNavDrawerComponent implements OnChanges, OnDestroy, OnInit {\n  @Output() openChange = new EventEmitter<boolean>();\n  @Input()\n  set open(value: boolean) {\n    this.show = value;\n    this.openChange.emit(this.show);\n  }\n\n  @Input() fixed = false;\n  @Input() fixedAtWidth = '1024px';\n  @ViewChild('nav', { static: false }) nav: ElementRef;\n\n  show = false;\n  fixedMode = false;\n  private subscription: Subscription;\n  private lastFocusedElement: HTMLElement;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: any,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    if (isPlatformBrowser(this.platformId)) {\n      this.setFixedPosition();\n      this.subscription = fromEvent(window, 'resize').subscribe(event =>\n        this.setFixedPosition()\n      );\n    }\n  }\n\n  @HostListener('document:click', ['$event'])\n  rootClick(event) {\n    this.lastFocusedElement = event.target;\n  }\n\n  ngOnChanges() {\n    this.focus();\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  outerClick(event) {\n    if (event.keyCode === KeyCodes.Escape && this.show === true) {\n      this.toggle();\n    }\n  }\n\n  setFixedPosition() {\n    if (isPlatformBrowser(this.platformId)) {\n      if (\n        window.matchMedia(`(min-width: ${this.fixedAtWidth})`).matches &&\n        this.fixed\n      ) {\n        this.fixedMode = true;\n      } else {\n        this.fixedMode = false;\n      }\n\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  toggle() {\n    if (!this.fixedMode) {\n      this.show = !this.show;\n      this.openChange.emit(this.show);\n    }\n\n    this.focus();\n  }\n\n  focus() {\n    if (this.show) {\n      trapTabFocus(this.nav.nativeElement);\n    } else if (this.lastFocusedElement) {\n      this.lastFocusedElement.focus();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxNavDrawerComponent } from './ngx-nav-drawer.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxNavDrawerComponent],\n  exports: [NgxNavDrawerComponent]\n})\nexport class NgxNavDrawerModule {}\n"],"names":[],"mappings":"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"}